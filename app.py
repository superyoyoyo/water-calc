import streamlit as st

# 1. é é¢åŸºæœ¬è¨­å®š
st.set_page_config(page_title="æ°´è™•ç†è¨ˆç®—æ©Ÿ", page_icon="ğŸ’§")
st.title("ğŸ’§ æ°´è™•ç†å·¥ç¨‹è¨ˆç®—æ©Ÿ")

# 2. å»ºç«‹å´é‚Šæ¬„æˆ–ä¸»ç•«é¢çš„é¸å–®
# é€™è£¡æˆ‘å€‘åšä¸€å€‹ä¸‹æ‹‰é¸å–®ï¼Œè®“ä½¿ç”¨è€…é¸æ“‡è¦ç®—ä»€éº¼
calculation_type = st.selectbox(
    "è«‹é¸æ“‡è¨ˆç®—é …ç›®ï¼š",
    ["è»ŸåŒ–ç³»çµ± (Softener)", "æ»¿åºŠç³»çµ± (2BT)", "æ··åºŠç³»çµ± (MB)"]
)

st.markdown("---") # ç•«ä¸€æ¢åˆ†éš”ç·š

# ==========================================
# æ¨¡å¼ A: è»ŸåŒ–ç³»çµ± (é€™æ˜¯åŸæœ¬çš„åŠŸèƒ½)
# ==========================================
if calculation_type == "è»ŸåŒ–ç³»çµ± (Softener)":
    st.header("ğŸ§‚ è»ŸåŒ–ç³»çµ±è¨ˆç®—")
    
    # [è¼¸å…¥å€]
    col1, col2 = st.columns(2)
    with col1:
        x = st.number_input("æ¨¹è„‚äº¤æ›å®¹é‡ (g/L)", value=40.0)
    with col2:
        y = st.number_input("æ¨¹è„‚ç¸½é‡ (L)", value=150.0)
    z = st.number_input("åŸæ°´ç¸½ç¡¬åº¦ (ppm CaCO3)", value=100.0)

    # [è¨ˆç®—èˆ‡çµæœ]
    if st.button("è¨ˆç®—è»ŸåŒ–ç”¢èƒ½"):
        if z <= 0:
            st.error("ç¡¬åº¦å¿…é ˆå¤§æ–¼ 0")
        else:
            ans = (x * y) / z
            safe_ans = ans * 0.7
            st.success(f"å»ºè­°æ¡æ°´é‡ï¼š**{safe_ans:.2f}** å™¸")

# ==========================================
# æ¨¡å¼ B: é™½é›¢å­ç³»çµ± (é€™æ˜¯æ–°å¢çš„ç¤ºç¯„)
# ==========================================
elif calculation_type == "é™½é›¢å­ç³»çµ± (Cation)":
    st.header("âš¡ é™½é›¢å­äº¤æ›è¨ˆç®—")
    st.info("é€™è£¡ç¤ºç¯„å¦‚ä½•å¢åŠ æ–°çš„è¨ˆç®—é é¢")

    # [è¼¸å…¥å€] - æ‚¨å¯ä»¥è‡ªç”±ä¿®æ”¹é€™è£¡çš„æ–‡å­—å’Œé è¨­å€¼
    col1, col2 = st.columns(2)
    with col1:
        catex_cap = st.number_input("é™½æ¨¹è„‚äº¤æ›å®¹é‡ (eq/L)", value=1.8) # èˆ‰ä¾‹
    with col2:
        resin_vol = st.number_input("é™½æ¨¹è„‚é«”ç© (L)", value=100.0)
    
    # é™½é›¢å­é€šå¸¸æ˜¯çœ‹ç¸½é™½é›¢å­å«é‡ (Total Cations)
    total_cation = st.number_input("åŸæ°´ç¸½é™½é›¢å­ (meq/L)", value=5.0)

    # [è¨ˆç®—èˆ‡çµæœ]
    if st.button("è¨ˆç®—é™½åºŠç”¢èƒ½"):
        if total_cation <= 0:
            st.error("æ•¸å€¼éŒ¯èª¤")
        else:
            # å‡è¨­å…¬å¼ï¼š (å·¥äº¤é‡ * é«”ç©) / ç¸½é™½é›¢å­
            # æ³¨æ„ï¼šé€™è£¡å–®ä½ä¸åŒï¼Œè¦ç¢ºèªæ‚¨çš„å·¥ç¨‹å…¬å¼
            output = (catex_cap * resin_vol) / total_cation
            st.success(f"ç†è«–æ¡æ°´é‡ï¼š**{output:.2f}** å™¸")

# ==========================================
# æ¨¡å¼ C: é™°é›¢å­ç³»çµ± (é ç•™çµ¦æ‚¨å¡«å¯«)
# ==========================================
elif calculation_type == "é™°é›¢å­ç³»çµ± (Anion)":
    st.header("ğŸ§ª é™°é›¢å­äº¤æ›è¨ˆç®—")
    st.write("ğŸš§ åŠŸèƒ½é–‹ç™¼ä¸­ï¼Œè«‹ä¾ç…§ä¸Šæ–¹æ ¼å¼è‡ªè¡Œè¤‡è£½ä¿®æ”¹ç¨‹å¼ç¢¼...")

# ==========================================
# æ¨¡å¼ D: æ··åºŠ (é ç•™çµ¦æ‚¨å¡«å¯«)
# ==========================================
elif calculation_type == "æ··åºŠç³»çµ± (MB)":
    st.header("ğŸ”„ æ··åºŠç³»çµ±è¨ˆç®—")
    st.write("ğŸš§ åŠŸèƒ½é–‹ç™¼ä¸­...")

